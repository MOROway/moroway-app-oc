<!DOCTYPE html>
<html>
    <head>
        <base href="../../">

<!-- Cordova Scripts 1 -->
<script src="cordova.js"></script>


        <meta charset="UTF-8">
        <meta name="theme-color" content="#000" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title data-stringid-content="generalTitleSettingsScreen"></title>
        <link rel="manifest" href="manifest.webmanifest">
        <link rel="icon" type="image/x-icon" sizes="32x32" href="favicon.ico">

        <!-- Open Source Libraries And Fonts -->
        <!-- Fonts -->
        <link rel="stylesheet" type="text/css" href="src/others/open_source/open_fonts/google/MaterialIcons/font.css">
        <link rel="stylesheet" type="text/css" href="src/others/open_source/open_fonts/google/Roboto/font.css">

        <!-- General Scripts -->
        <script src="src/jonathan_herrmann_engel/js/error_handler.js"></script>
        <script src="src/jonathan_herrmann_engel/js_platform/error_handler.js"></script>
        <script src="src/jonathan_herrmann_engel/js/appdata.js"></script>
        <script src="src/jonathan_herrmann_engel/js_platform/appdata.js"></script>
        <script src="src/jonathan_herrmann_engel/js/general.js"></script>
        <script src="src/jonathan_herrmann_engel/js_platform/general.js"></script>

        <!-- General Styles -->
        <link rel="stylesheet" type="text/css" href="src/jonathan_herrmann_engel/css/general.css">
        <link rel="stylesheet" type="text/css" href="src/jonathan_herrmann_engel/css_platform/general.css">

        <style>
            body {
                text-align: left;
                background: floralWhite;
            }
            main {
                display: none;
            }
        </style>
    </head>

    <body>

        
        <header class="page-header">
            <i id="backOption" class="internal-link material-icons">arrow_back</i>
            <h1 data-stringid-content="generalTitleSettingsScreen"></h1>
        </header>

        <main>

            <ul class="settings-list">
                
                <li id="landscapeApp">
                   <div class="settings-opts-wrapper">
                        <i class="settings-opts-left-button material-icons">settings</i>
                        <span class="settings-opts-text-button" data-stringid-content="platformOcSettingsOptLandscapeAppTitle"></span>
                   </div>
                    <div class="settings-hints-wrapper">
                            <span data-stringid-content="platformOcSettingsOptLandscapeAppDesc"></span>
                    </div>
                </li>

                <li id="landscapeGame">
                    <div class="settings-opts-wrapper">
                        <i class="settings-opts-left-button material-icons">settings</i>
                        <span class="settings-opts-text-button" data-stringid-content="platformOcSettingsOptLandscapeGameTitle"></span>
                     </div>
                    <div class="settings-hints-wrapper">
                            <span data-stringid-content="platformOcSettingsOptLandscapeGameDesc"></span>
                            <br>
                            <i data-stringid-content="platformOcSettingsOptLandscapeGameInfo"></i>
                    </div>
                </li>

            </ul>

        </main>

        <!-- notify -->
        <div id="settings-notifier" class="notify">
            <span></span>
            <button></button>
            </div>

        <!-- load strings -->
        <script>

function chooseInputMethod (event){
    var type = event.type;
    document.querySelector("body").removeEventListener("touchstart",chooseInputMethod);
    document.querySelector("body").removeEventListener("mousemove",chooseInputMethod);
    if(type == "touchstart"){
        type = "touch";
    } else {
        type = "mouse";
    }
    setCurrentHardwareConfig("input",type);
}

function displaySettingsOptsOC(isInitial){
    for(var i = 0; i < Object.keys(settings).length; i++) {
            var a = Object.values(settings)[i];
            var b = Object.keys(settings)[i];
            var elem = document.querySelector("#"+b);
            if(elem !== null){

                var leftButton = document.querySelector("#"+b).querySelector(".settings-opts-left-button");
                var textButton = document.querySelector("#"+b).querySelector(".settings-opts-text-button");

                if(a){
                    leftButton.style.backgroundColor = "black";
                    leftButton.style.transform = "rotate(360deg)";
                } else {
                    leftButton.style.backgroundColor = "";
                    leftButton.style.transform = "rotate(0deg)";
                }

                if(isSettingActiveOC(b) && isHardwareAvailableOC(b)) {
                    elem.style.setProperty("display", "block");
                } else {
                    elem.style.setProperty("display", "none");
                }

                if(isInitial){
                    leftButton.id = b+"settings-opts-left-button";
                    textButton.id = b+"settings-opts-text-button";
                    leftButton.addEventListener("click", function(event){settingsChangeOC(event, 'settings-opts-left-button');})
                    textButton.addEventListener("click", function(event){settingsChangeOC(event, 'settings-opts-text-button');})
                }
            }
    }
}

function settingsChangeOC(event, suffix) {
    var id = event.target.id.substr(0,event.target.id.length-suffix.length);
    if( id !== undefined && isSettingActiveOC(id)) {
        settings[id] = !settings[id];
        setSettingsOC(settings);
        displaySettingsOptsOC(false);
        notify("#settings-notifier", getString("optApply", "."), NOTIFICATION_PRIO_LOW, 900, null, null, window.innerHeight);
    }
}

var settings = {};
var settingsComplete = {};

window.addEventListener("load", function(){

     if(typeof(window.localStorage) != "undefined") {

        settingsComplete = getSettingsOC(true);
        settings = settingsComplete.values;

        displaySettingsOptsOC(true);
        document.querySelector("main").style.display = "unset";

        document.querySelector("body").addEventListener("touchstart",chooseInputMethod);
        document.querySelector("body").addEventListener("mousemove",chooseInputMethod)
        
        document.querySelector("#backOption").addEventListener("click", function(){try {window.close();}catch(err) {}; followLink("html_platform/start.html","_self", LINK_STATE_INTERNAL_LICENSE_FILE);}, false);
    } else {
        document.querySelector("body").innerHTML = getString("generalNoDOMStorageSupport");
    }

});

setHTMLStrings();

        </script>

    

<!-- Cordova Scripts 2 -->
<script>document.addEventListener("deviceready", function() {if(typeof localDR == "function"){localDR();}if(typeof globalDR == "function"){globalDR();}});</script>

</body>
</html>
